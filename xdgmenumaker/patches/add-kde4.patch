diff -Naur orig/src/xdgmenumaker patched/src/xdgmenumaker
--- orig/src/xdgmenumaker	2015-08-10 00:40:00.000000000 +0200
+++ patched/src/xdgmenumaker	2015-08-22 12:04:31.212420462 +0200
@@ -8,6 +8,7 @@
 import xdg.Exceptions as exc
 import xdg.BaseDirectory as bd
 import ConfigParser
+import re
 from operator import attrgetter
 
 seticon = False
@@ -16,6 +17,9 @@
 submenu = True
 pekwmdynamic = False
 
+exec_clean1_re = re.compile(r'%[a-zA-Z]')
+exec_clean2_re = re.compile(r'%%')
+
 de = dentry.DesktopEntry(filename = '/usr/share/desktop-directories/xdgmenumaker-applications.directory')
 applications = de.getName().encode('utf-8')
 applications_icon = de.getIcon()
@@ -187,7 +191,7 @@
 		show = False
 
 	# removing any %U or %F from the exec line
-	command = de.getExec().partition('%')[0]
+	command = exec_clean2_re.sub('%', exec_clean1_re.sub('', de.getExec()))
 
 	terminal = de.getTerminal()
 	if terminal is True:
@@ -269,6 +273,13 @@
 					if i not in df_temp:
 						df_temp.append(i)
 						filelist.append(xdgdir+'/'+i)
+		xdgdir = d+'/applications/kde4'
+		if os.path.isdir(xdgdir):
+			for i in os.listdir(xdgdir):
+				if i.endswith('.desktop'):
+					if i not in df_temp:
+						df_temp.append(i)
+						filelist.append(xdgdir+'/'+i)
 	return filelist
 
 def menu():
