Description: fix freetype include path detection
 freetype 2.5 changed the location of the configuration headers
 so cmake can't find it anymore. This fixes the detection and is based
 on patches attached to cmake bug 13959.
Bug: http://www.cmake.org/Bug/view.php?id=13959
Origin: other
Last-Update: 2013-12-01
Index: b/Modules/FindFreetype.cmake
===================================================================
--- a/Modules/FindFreetype.cmake
+++ b/Modules/FindFreetype.cmake
@@ -42,9 +42,16 @@
 # wants explicit full paths and this trickery doesn't work too well.
 # I'm going to attempt to cut out the middleman and hope
 # everything still works.
+
+if(UNIX)
+	find_package(PkgConfig QUIET)
+	pkg_check_modules(_PC_FREETYPE freetype2)
+endif()
+
 find_path(FREETYPE_INCLUDE_DIR_ft2build ft2build.h
   HINTS
     ENV FREETYPE_DIR
+    ${_PC_FREETYPE_INCLUDE_DIRS}
   PATHS
     /usr/X11R6
     /usr/local/X11R6
@@ -56,9 +63,10 @@ find_path(FREETYPE_INCLUDE_DIR_ft2build
   PATH_SUFFIXES include/freetype2 include
 )
 
-find_path(FREETYPE_INCLUDE_DIR_freetype2 freetype/config/ftheader.h
+find_path(FREETYPE_INCLUDE_DIR_freetype2 config/ftheader.h
   HINTS
     ENV FREETYPE_DIR
+    ${_PC_FREETYPE_INCLUDE_DIRS}
   PATHS
     /usr/X11R6
     /usr/local/X11R6
@@ -67,13 +75,14 @@ find_path(FREETYPE_INCLUDE_DIR_freetype2
     ENV GTKMM_BASEPATH
     [HKEY_CURRENT_USER\\SOFTWARE\\gtkmm\\2.4;Path]
     [HKEY_LOCAL_MACHINE\\SOFTWARE\\gtkmm\\2.4;Path]
-  PATH_SUFFIXES include/freetype2 include
+  PATH_SUFFIXES include/freetype2 include/freetype include
 )
 
 find_library(FREETYPE_LIBRARY
   NAMES freetype libfreetype freetype219
   HINTS
     ENV FREETYPE_DIR
+    ${_PC_FREETYPE_LIBRARY_DIRS}
   PATH_SUFFIXES lib
   PATHS
     /usr/X11R6
@@ -111,6 +120,9 @@ if(FREETYPE_INCLUDE_DIR_freetype2 AND EX
         endforeach()
     endforeach()
 endif()
+if(NOT FREETYPE_VERSION_STRING AND _PC_FREETYPE_VERSION)
+  set(FREETYPE_VERSION_STRING ${_PC_FREETYPE_VERSION})
+endif()
 
 
 # handle the QUIETLY and REQUIRED arguments and set FREETYPE_FOUND to TRUE if
