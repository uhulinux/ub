From 992db2f2efe7d00310b97f6a4cc6125c63048e03 Mon Sep 17 00:00:00 2001
From: leigh123linux <leigh123linux@googlemail.com>
Date: Fri, 7 Aug 2015 07:34:14 +0100
Subject: [PATCH] Revert "Keyboard applet: Show text when layout icon isn't
 found"

This reverts commit e6c3fd9fb247f08e65b316540c2b0e5fd6de65f4.
---
 .../share/cinnamon/applets/keyboard@cinnamon.org/applet.js    | 11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)

diff --git a/files/usr/share/cinnamon/applets/keyboard@cinnamon.org/applet.js b/files/usr/share/cinnamon/applets/keyboard@cinnamon.org/applet.js
index d3c2918..bb3a9bd 100644
--- a/files/usr/share/cinnamon/applets/keyboard@cinnamon.org/applet.js
+++ b/files/usr/share/cinnamon/applets/keyboard@cinnamon.org/applet.js
@@ -47,8 +47,7 @@ MyApplet.prototype = {
             this.metadata = metadata;
             Main.systrayManager.registerRole("keyboard", metadata.uuid);
 
-            this.icon_theme = Gtk.IconTheme.get_default();
-            this.icon_theme.append_search_path(metadata.path + "/flags");
+            Gtk.IconTheme.get_default().append_search_path(metadata.path + "/flags");                              
             this.menuManager = new PopupMenu.PopupMenuManager(this);
             this.menu = new Applet.AppletPopupMenu(this, orientation);
             this.menuManager.addMenu(this.menu);                            
@@ -139,14 +138,13 @@ MyApplet.prototype = {
         for (let i = 0; i < groups.length; i++) {
             let icon_name = this._config.get_group_name(i);
             let actor;
-            if (this._showFlags && this.icon_theme.has_icon(icon_name))
+            if (this._showFlags)
                 actor = new St.Icon({ icon_name: icon_name, icon_type: St.IconType.FULLCOLOR, style_class: 'popup-menu-icon' });
             else
                 actor = new St.Label({ text: short_names[i] });
             let item = new LayoutMenuItem(this._config, i, actor, groups[i]);
             item._short_group_name = short_names[i];
             item._icon_name = icon_name;
-            item._long_name = groups[i];
             this._layoutItems.push(item);
             this.menu.addMenuItem(item, i);
 
@@ -170,14 +168,13 @@ MyApplet.prototype = {
 
         let selectedLabel = this._labelActors[selected];
 
-        this.set_applet_tooltip(item._long_name)
-        if (this._showFlags && this.icon_theme.has_icon(item._icon_name)) {
+        if (this._showFlags) {
             this.set_applet_icon_name(item._icon_name);
             this.set_applet_label("");
         } else {
             this.hide_applet_icon();
             this.set_applet_label(selectedLabel.text);
-        }
+        }       
 
         this._selectedLayout = item;
     },
-- 
2.5.0

